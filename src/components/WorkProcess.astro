---
import { Icon } from "astro-icon/components";

const steps = [
  { icon: "mdi:account-voice",     title: "Escuchamos",  description: "Analizamos tus objetivos para entender tus necesidades reales." },
  { icon: "mdi:lightbulb-outline", title: "Diseñamos",   description: "Proponemos soluciones eficientes, personalizadas y escalables." },
  { icon: "mdi:cog-outline",       title: "Ejecutamos",  description: "Implementamos con precisión, calidad y foco en resultados." },
  { icon: "mdi:chart-line",        title: "Optimizamos", description: "Medimos y mejoramos continuamente para potenciar tu crecimiento." },
];
---

<section class="py-20 px-4 bg-[var(--color-light)] overflow-hidden">
  <div class="max-w-7xl mx-auto">
    <!-- Título -->
    <div class="text-center mb-16" data-aos="fade-up">
      <h2 class="text-4xl md:text-5xl font-bold text-[var(--color-primary)] mb-4">
        ¿Cómo trabajamos?
      </h2>
      <div class="w-24 h-1 mx-auto rounded"
           style="background: var(--color-secondary)"></div>
    </div>

    <!-- Pasos -->
    <div class="relative grid md:grid-cols-2 lg:grid-cols-4 gap-8 [perspective:1000px]">
      <!-- línea conectora en desktop -->
      <div
        class="hidden lg:block absolute top-1/2 left-0 right-0 h-px pointer-events-none"
        style="background: linear-gradient(90deg, transparent, color-mix(in oklab, var(--color-secondary) 35%, transparent), transparent);">
      </div>

      {steps.map((step, i) => (
        <div
          data-aos="fade-up"
          data-aos-delay={120 + i * 120}
          class="group relative rounded-xl p-8 shadow-lg ring-1
                 bg-[var(--color-light)] ring-[color:color-mix(in_oklab,var(--color-dark)10%,transparent)]
                 transition-all duration-700 ease-[cubic-bezier(.22,1,.36,1)]
                 hover:shadow-2xl hover:-translate-y-1
                 will-change-transform transform-gpu
                 hover:[transform:rotateX(1deg)_rotateY(-1deg)]
                 motion-reduce:transition-none motion-reduce:hover:transform-none"
        >
          <!-- Icono -->
          <div
            class="mb-6 transition-transform duration-700 ease-[cubic-bezier(.22,1,.36,1)] group-hover:-translate-y-1
                   motion-reduce:transition-none"
          >
            <Icon name={step.icon} class="w-8 h-8 text-[var(--color-secondary)]" />
          </div>

          <h3 class="text-2xl font-bold text-[var(--color-primary)] mb-3">{step.title}</h3>
          <p class="leading-relaxed text-[color:color-mix(in_oklab,var(--color-gray)85%,var(--color-dark)15%)]">
            {step.description}
          </p>

          <!-- glow sutil al hover -->
          <div
            class="pointer-events-none absolute inset-0 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-700"
            style="box-shadow: 0 10px 40px color-mix(in oklab, var(--color-secondary) 25%, transparent);">
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
